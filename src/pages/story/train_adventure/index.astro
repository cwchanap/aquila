---
import MainLayout from '@/layouts/main.astro';
---

<MainLayout title="Train Adventure">
  <div id="game-container" class="w-full h-screen bg-black"></div>
</MainLayout>

<script>
  import Phaser from 'phaser';
  import { EntryScene } from '@/game/EntryScene';

  document.addEventListener('DOMContentLoaded', () => {
    const urlParams = new URLSearchParams(window.location.search);
    const characterName = urlParams.get('name') || 'Player';

    const config = {
      type: Phaser.AUTO,
      width: window.innerWidth,
      height: window.innerHeight,
      parent: 'game-container',
      backgroundColor: '#2c3e50',
      scene: [EntryScene],
      scale: {
        mode: Phaser.Scale.RESIZE,
        autoCenter: Phaser.Scale.CENTER_BOTH
      }
    };

    const game = new Phaser.Game(config);
    
    // Pass character name to the entry scene
    game.scene.start('EntryScene', { characterName });
  });
</script>